{
	"name": "OAuth",
	"version": "1.1.0",
	"author": [
		"Aaron Schulz",
		"Chris Steipp",
		"Brad Jorsch",
		"Robert Vogel",
		"Dejan Savuljesku"
	],
	"url": "https://www.mediawiki.org/wiki/Extension:OAuth",
	"descriptionmsg": "mwoauth-desc",
	"license-name": "GPL-2.0-or-later",
	"type": "other",
	"requires": {
		"MediaWiki": ">= 1.38.0"
	},
	"ExtensionFunctions": [
		"MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onExtensionFunctions"
	],
	"DefaultUserOptions": {
		"echo-subscriptions-web-oauth-owner": true,
		"echo-subscriptions-email-oauth-owner": true,
		"echo-subscriptions-web-oauth-admin": true,
		"echo-subscriptions-email-oauth-admin": true
	},
	"GroupPermissions": {
		"user": {
			"mwoauthmanagemygrants": true
		}
	},
	"AvailableRights": [
		"mwoauthproposeconsumer",
		"mwoauthupdateownconsumer",
		"mwoauthmanageconsumer",
		"mwoauthsuppress",
		"mwoauthviewsuppressed",
		"mwoauthviewprivate",
		"mwoauthmanagemygrants"
	],
	"SessionProviders": {
		"MediaWiki\\Extension\\OAuth\\SessionProvider": {
			"class": "MediaWiki\\Extension\\OAuth\\SessionProvider",
			"args": []
		}
	},
	"SpecialPages": {
		"OAuth": {
			"class": "MediaWiki\\Extension\\OAuth\\Frontend\\SpecialPages\\SpecialMWOAuth",
			"services": [
				"GrantsLocalization"
			]
		},
		"OAuthManageMyGrants": {
			"class": "MediaWiki\\Extension\\OAuth\\Frontend\\SpecialPages\\SpecialMWOAuthManageMyGrants",
			"services": [
				"GrantsInfo",
				"GrantsLocalization"
			]
		},
		"OAuthListConsumers": {
			"class": "MediaWiki\\Extension\\OAuth\\Frontend\\SpecialPages\\SpecialMWOAuthListConsumers",
			"services": [
				"GrantsLocalization"
			]
		}
	},
	"MessagesDirs": {
		"MWOAuth": [
			"i18n"
		]
	},
	"ExtensionMessagesFiles": {
		"MWOAuthAliases": "MWOAuth.alias.php"
	},
	"AutoloadNamespaces": {
		"MediaWiki\\Extension\\OAuth\\": "src/"
	},
	"TestAutoloadNamespaces": {
		"MediaWiki\\Extension\\OAuth\\Tests\\": "tests/phpunit/"
	},
	"TestAutoloadClasses": {
		"MediaWiki\\Extension\\OAuth\\Tests\\TestHandlerFactory": "tests/TestHandlerFactory.php"
	},
	"ResourceModules": {
		"ext.MWOAuth.styles": {
			"styles": [
				"ext.MWOAuth.BasicStyles.css",
				"ext.MWOAuth.AuthorizeForm.css"
			]
		},
		"ext.MWOAuth.AuthorizeDialog": {
			"scripts": [
				"ext.MWOAuth.AuthorizeDialog.js"
			],
			"dependencies": [
				"jquery.ui"
			],
			"messages": [
				"mwoauth-desc"
			]
		}
	},
	"ResourceFileModulePaths": {
		"localBasePath": "resources/modules",
		"remoteExtPath": "OAuth/resources/modules"
	},
	"callback": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onRegistration",
	"HookHandlers": {
		"abusefilter": {
			"class": "MediaWiki\\Extension\\OAuth\\Backend\\AbuseFilterHookHandler"
		}
	},
	"Hooks": {
		"AbuseFilter-builder": "abusefilter",
		"AbuseFilter-computeVariable": "abusefilter",
		"AbuseFilter-generateUserVars": "abusefilter",
		"ChangeTagCanCreate": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onChangeTagCanCreate",
		"MergeAccountFromTo": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onMergeAccountFromTo",
		"CentralAuthGlobalUserMerged": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onCentralAuthGlobalUserMerged",
		"LoadExtensionSchemaUpdates": "MediaWiki\\Extension\\OAuth\\Backend\\UpdaterHooks::addSchemaUpdates",
		"GetPreferences": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onGetPreferences",
		"MessagesPreLoad": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onMessagesPreLoad",
		"SpecialPageAfterExecute": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onSpecialPageAfterExecute",
		"SpecialPageBeforeFormDisplay": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onSpecialPageBeforeFormDisplay",
		"BeforeCreateEchoEvent": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onBeforeCreateEchoEvent",
		"CentralAuthAbortCentralAuthToken": "MediaWiki\\Extension\\OAuth\\Setup::onCentralAuthAbortCentralAuthToken",
		"TestCanonicalRedirect": "MediaWiki\\Extension\\OAuth\\Setup::onTestCanonicalRedirect",
		"SetupAfterCache": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onSetupAfterCache",
		"ApiRsdServiceApis": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onApiRsdServiceApis",
		"SpecialPage_initList": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onSpecialPage_initList",
		"ListDefinedTags": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onListDefinedTags",
		"ChangeTagsListActive": "MediaWiki\\Extension\\OAuth\\Backend\\Hooks::onChangeTagsListActive",
		"LoginFormValidErrorMessages": "MediaWiki\\Extension\\OAuth\\Frontend\\UIHooks::onLoginFormValidErrorMessages"
	},
	"ConfigRegistry": {
		"mwoauth": "GlobalVarConfig::newInstance"
	},
	"config": {
		"MWOAuthCentralWiki": {
			"value": false,
			"description": "Wiki ID of OAuth management wiki. On wiki farms, it makes sense to set this to a wiki that acts as a portal site, is decidated to management, or just handles login/authentication. It can, however, be set to any wiki if the farm. For single-wiki sites or farms where each wiki manages consumers separately, it should be left as false."
		},
		"MWOAuthSharedUserIDs": {
			"value": false,
			"description": "Whether shared global user IDs are stored in the oauth tables. On wiki farms with a central authentication system (with integer user IDs) that share a single OAuth management wiki, this must be set to true. If wikis have a central authentication system but have their own OAuth management, then this can be either true or false. Otherwise it should always be set to false Setting this to true requires CentralIdLookup or an MWOAuth aware authentication extension. This value should not be changed after the fact to avoid ambigious IDs. Proper user ID migration should be done before any such changes."
		},
		"MWOAuthSharedUserSource": {
			"value": null,
			"description": "Source of shared user IDs, if enabled. If CentralIdLookup is available, this is the $providerId for CentralIdLookupFactory::getLookup(). Generally null would be what you want, to use the default provider. If that class is not available or the named provider is not found, this is\n * passed to the 'OAuthGetUserNamesFromCentralIds', 'OAuthGetLocalUserFromCentralId', 'OAuthGetCentralIdFromLocalUser', and 'OAuthGetCentralIdFromUserName' hooks. This has no effect if $wgMWOAuthSharedUserIDs is set to false."
		},
		"MWOAuthRequestExpirationAge": {
			"value": 2592000,
			"description": "Seconds after which an idle consumer request is marked as \"expired\""
		},
		"MWOAuthSecureTokenTransfer": {
			"value": true,
			"description": "Require HTTPs for user transactions that might send out secret tokens"
		},
		"MWOauthDisabledApiModules": {
			"value": [],
			"description": "List of API module classes to disable when OAuth is used for the request"
		},
		"MWOAuthReadOnly": {
			"value": false,
			"description": "Prevent write activity to the database. When this is set, consumers cannot be added or updated, and new authorizations are prohibited. Authorization headers for existing authorizations will continue to work. Useful for migrating database tables"
		},
		"OAuthGroupsToNotify": {
			"value": [],
			"description": "User groups to notify about new consumers that need to be reviewed"
		},
		"MWOAuthSessionCacheType": {
			"value": null
		},
		"OAuthSecretKey": {
			"value": null,
			"description": "Random 32-bit string used to encrypt OAuth requests. Generate using \"base64_encode(random_bytes(32))\""
		},
		"OAuth2EnabledGrantTypes": {
			"value": [
				"authorization_code",
				"refresh_token",
				"client_credentials"
			],
			"description": "List of OAuth2 grants that client applications can use"
		},
		"OAuth2PrivateKey": {
			"value": "",
			"description": "Private key or a path to the private key used to sign OAuth2 JWT being transmitted"
		},
		"OAuth2PublicKey": {
			"value": "",
			"description": "Public key or a path to the public key used to verify OAuth2 resource requests"
		},
		"OAuth2RequireCodeChallengeForPublicClients": {
			"value": true,
			"description": "Controls whether clients are required to send code challenges with OAuth2 requests. This only applies to non-confidential clients"
		},
		"OAuth2GrantExpirationInterval": {
			"description": "Controls validity period for access tokens. Does not apply to owner-only clients, whose access tokens are always non-expiring. Accepts ISO 8601 durations or can be set to \"infinity\" or false for non-expiring tokens",
			"value": "PT1H"
		},
		"OAuth2RefreshTokenTTL": {
			"description": "Controls validity period for refresh tokens. Accepts ISO 8601 durations or can be set to \"infinity\" or false for non-expiring tokens",
			"value": "PT1M"
		}
	},
	"GrantPermissions": {
		"oauthmanageownclient": {
			"mwoauthproposeconsumer": true,
			"mwoauthupdateownconsumer": true,
			"mwoauthmanagemygrants": true
		}
	},
	"GrantPermissionGroups": {
		"oauthmanageownclient": "administration"
	},
	"RestRoutes": [
		{
			"path": "/oauth2/authorize",
			"factory": "MediaWiki\\Extension\\OAuth\\Rest\\Handler\\Authorize::factory"
		},
		{
			"path": "/oauth2/access_token",
			"factory": "MediaWiki\\Extension\\OAuth\\Rest\\Handler\\AccessToken::factory",
			"method": "POST"
		},
		{
			"path": "/oauth2/resource/{type}",
			"factory": "MediaWiki\\Extension\\OAuth\\Rest\\Handler\\Resource::factory"
		},
		{
			"path": "/oauth2/client",
			"class": "MediaWiki\\Extension\\OAuth\\Rest\\Handler\\RequestClient",
			"method": "POST"
		},
		{
			"path": "/oauth2/client/{client_key}/reset_secret",
			"class": "MediaWiki\\Extension\\OAuth\\Rest\\Handler\\ResetClientSecret",
			"method": "POST"
		},
		{
			"path": "/oauth2/client",
			"class": "MediaWiki\\Extension\\OAuth\\Rest\\Handler\\ListClients",
			"services": [
				"DBLoadBalancer"
			],
			"method": "GET"
		}
	],
	"load_composer_autoloader": true,
	"manifest_version": 2
}
